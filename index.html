<html>

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Aeon's End Turn Order Assistant</title>
<link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body>
<div id = "buttons">
<button type ="player count" onclick="buttonPress(1)"> Solo </button>
<button type ="player count" onclick="buttonPress(2)"> Two players </button>
<button type ="player count" onclick="buttonPress(3)"> Three players </button>
<button type ="player count" onclick="buttonPress(4)"> Four players </button>
</div>
<br>
<div id = "turnOrder">
	<img src ="images/cardBack.jpg" id = "deck" onclick="takeTurn()" width = 40%/>
	<br>
	<img id = "card1" width = 15%/>
	<img id = "card2" width = 15%/>
	<img id = "card3" width = 15%/>
	<img id = "card4" width = 15%/>
	<img id = "card5" width = 15%/>
	<img id = "card6" width = 15%/>
</div>
<!--
<div id = "scaling">
<img src ="images/discard/p1.jpg" id = "test" width = 100%/>
<img src ="images/discard/p2.jpg" id = "test" width = 100%/>
<img src ="images/discard/p3.jpg" id = "test" width = 100%/>
<img src ="images/discard/p4.jpg" id = "test" width = 100%/>
<img src ="images/discard/nemesis.jpg" id = "test" width = 100%/>
<img src ="images/discard/nemesis.jpg" id = "test" width = 100%/>
-->
</div>

<br>
<div id = "revealButton">
<button type = "reveal" onClick="revealTop()"> Reveal top </button>
<button type = "reveal" onClick="putBottom()"> Put top on bottom </button>
</div>
</body>
<p id = "roundNum"> Current Round: 0 </p>

<script src ="Underscore.js" type="text/javascript">
</script>

<script type = "text/javascript">

turnDeck = [];
turnDiscard = [];
roundNum = 1;
currentCard = 1;

function buttonPress(numPlayers){
	if (numPlayers==1){
		turnDeck = ["p1","p1","p1","nemesis","nemesis"];
		};
	if (numPlayers==2){
		turnDeck = ["p1", "p2", "p1", "p2", "nemesis", "nemesis"];
	};
	if (numPlayers==3){
		turnDeck = ["p1", "p2", "p3", "wild", "nemesis", "nemesis"]
	};
	if (numPlayers==4){
		turnDeck = ["p1", "p2", "p3", "p4", "nemesis", "nemesis"]
		
	};
	turnDiscard = [];
	shuffle();
	showBack();
	hide();
	roundNum = 1;
	currentCard = 1;
	setRoundNum();
}

shuffle = function(){
	turnDeck = _.shuffle(turnDeck);
}

setRoundNum = function(){
	document.getElementById("roundNum").innerHTML = "Current Round: " + roundNum;
}

takeTurn = function(){
	console.log(turnDeck[0]);
	console.log(turnDeck);
	console.log(currentCard);
	if (turnDeck.length == 0){
		resetDeck();
		roundNum = roundNum+1;
		setRoundNum();
		hide();
	}
	document.getElementById("card" + currentCard).style.visibility="visible";
	turnDiscard.unshift(turnDeck.shift());
	document.getElementById("card" + currentCard).src="images/" + turnDiscard[0] + ".jpg";
	currentCard = currentCard + 1;
	showBack();
}
        
resetDeck = function(){
        while (turnDiscard.length > 0){
                turnDeck.push(turnDiscard.shift());
        shuffle()
		}
		currentCard = 1;
}

revealTop = function(){
	document.getElementById("deck").src="images/" + turnDeck[0] + ".jpg";
}

putBottom = function(){
	turnDeck.push(turnDeck.shift());
	showBack();
};

showBack = function(){
	document.getElementById("deck").src="images/cardBack.jpg";
}

hide = function(){
	document.getElementById("card1").style.visibility="hidden";
	document.getElementById("card2").style.visibility="hidden";
	document.getElementById("card3").style.visibility="hidden";
	document.getElementById("card4").style.visibility="hidden";
	document.getElementById("card5").style.visibility="hidden";
	document.getElementById("card6").style.visibility="hidden";
}

window.onload = function() {
	buttonPress(2);
};
</script>

</html>
