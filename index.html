<html>

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Aeon's End Turn Order Assistant</title>
<link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body>
<div id = "buttons">
<button type ="player count" onclick="buttonPress(1)"> Solo </button>
<button type ="player count" onclick="buttonPress(2)"> Two players </button>
<button type ="player count" onclick="buttonPress(3)"> Three players </button>
<button type ="player count" onclick="buttonPress(4)"> Four players </button>
</div>

<div id = "turnOrder">
	<img src ="images/cardBack.jpg" id = "card" onclick="takeTurn()" width = 50%/>
</div>

<div id = "revealButton">
<button type = "reveal" onClick="revealTop()"> Reveal top </button>
<button type = "reveal" onClick="putBottom()"> Put top on bottom </button>
</div>
</body>
<p id = "roundNum"> Current Round: 0 </p>

<script src ="Underscore.js" type="text/javascript">
</script>

<script type = "text/javascript">

turnDeck = [];
turnDiscard = [];
roundNum = 0;

function buttonPress(numPlayers){
	if (numPlayers==1){
		turnDeck = ["p1","p1","p1","nemesis","nemesis"];
		};
	if (numPlayers==2){
		turnDeck = ["p1", "p2", "p1", "p2", "nemesis", "nemesis"];
	};
	if (numPlayers==3){
		turnDeck = ["p1", "p2", "p3", "wild", "nemesis", "nemesis"]
	};
	if (numPlayers==4){
		turnDeck = ["p1", "p2", "p3", "p4", "nemesis", "nemesis"]
		
	};
	turnDiscard = [];
	shuffle();
	showBack();
	roundNum = 0;
	setRoundNum();
}

shuffle = function(){
	turnDeck = _.shuffle(turnDeck);
}

setRoundNum = function(){
	document.getElementById("roundNum").innerHTML = "Current Round: " + roundNum;
}

takeTurn = function(){
	console.log(turnDeck[0]);
	console.log(turnDeck);
	turnDiscard.unshift(turnDeck.shift());
	document.getElementById("card").src="images/" + turnDiscard[0] + ".jpg";
	if (turnDeck.length == 0){
		resetDeck();
		roundNum = roundNum+1;
		setRoundNum();
	}
}
        
resetDeck = function(){
        while (turnDiscard.length > 0){
                turnDeck.push(turnDiscard.shift());
        shuffle()
		}
}

revealTop = function(){
	document.getElementById("card").src="images/" + turnDeck[0] + ".jpg";
}

putBottom = function(){
	turnDeck.push(turnDeck.shift());
	showBack();
};

showBack = function(){
	document.getElementById("card").src="images/cardBack.jpg";
}

window.onload = function() {
	buttonPress(2);
};
</script>

</html>
